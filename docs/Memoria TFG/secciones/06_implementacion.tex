\chapter{Implementación}

\iffalse
La implementación del software se ha dividido en hitos. Estos, han sido definidos en Github
y cada uno de ellos contiene un grupo de \textit{issues} que se corresponden con las distintas
mejoras que se han ido incorporando al software a lo largo de su desarrollo.\\

Esquema para luego redactar bien:

- Empezamos aprendiendo React

- Hice una demo básica

- Busqué librerias y cosas mientras seguí aprendiendo React (planificacion)

- Despues de unos cuantos proyectos de prueba y elegidas las librerias me lancé con el editor

- A partir de la demo rehice todo para adaptarlo a la libería 

- Lo primero fue hacer que se pudiera añadir una foto base (DragAndDrop y Konva canvas)

- Explicar todo tema lienzo, cálculos etc..

- Se añadió poder quitar la foto y volver a añadir otra

- Comenzamos el poder añadir texto

- todo tema texto, textarea, propiedades, drag, transformador, lo de adaptar el texto al tamaño de la caja bla bla 

- Comienzo de la toolbar para poder poner el texto bonito

- Tema toolbar, material-ui, como mandamos la info desde la toolbar al texto y lo actualizamos bla bla

- Hablar de ajustes varios, tema eventos etc.. clicks handlers bla bla

- Añadido el ctrl + v de imagen principal (esto quizá explicarlo después para juntar todo el tema texto)

- Handleo de varios textos diferentes

- Cuando ya se cambiaban los textos desde la toolbar ahora como se cambia la toolbar para que coincida con las opciones del texto

- Hablar un poco de tema componentes funcionales vs clases (todos los cambios que se hicieron)

- PRIMERA TANDA DE TESTS (preguntar a JJ si explicar esto todo luego o aquí)

- Además de texto ahora a añadir mas cosas, Imágenes y sus transformaciones

- Hablar del tema lineas, como se movian las cosas al pintar encima, la lógica de las herramientas
  como se ha solucionado, porque se ha hecho así y el React.clone()

- [pensar lo que falta por aqui]

- tema eventos, copiar pegar, guardar etc

-production build

-despliegue
\\\\\\
\fi

Para comenzar con la implementación, se partió del código elaborado como demo en la 
fase de planifiación.
Está bastante extendido en el desarrollo de React emplear el paquete create-react-app 
\cite{create-react-app}.

Es un paquete creado por Facebook que se instala con el gestor de paquetes de node 
(npm) que crea una aplicación de React vacía con todo lo básico necesario más 
algunos scripts que ayudan en el desarrollo y en el despliegue, como por ejemplo, el 
script react-run, para ejecutar el servidor de desarrollo, que se recompila
automáticamente al detectar cambios y hace el desarrollo mucho más fluido o el build
para crear una versión release optimizada.
\\\\
Por si sólo, React es una biblioteca para construir interfaces de usuario que cuenta con
módulos extra que permiten extender su funcionalidad, es decir, no es un framework, como
otras tecnologías empleadas para el diseño de interfaces, como Vue.js o Angular.js, 
sin embargo con estos módulos podemos ampliar las funcionalidades de la biblioteca React 
dependiendo del uso que vayamos a darle, en nuestro caso como queremos crear una aplicación
web, necesitamos interactuar con el 'Document Object Model' (DOM \cite{DOM}), que es la estructura
de documentos HTML que genera React y procesa el navegador, por ende y tras la creación de 
la plantilla inicial en React, instalamos los módulos de React que permiten interactuar 
con él, react-dom \cite{react-dom}.

También necesitamos un módulo que permita a React cambiar la página generada dependiendo de la 
ruta a la que accede el usuario, en el caso de nuestra aplicación, siempre querremos mostrar 
la página del editor así que debemos redirigir todas las rutas al componente principal <Editor/>
que veremos en profundidad más adelante (aunque se planea añadir más páginas en un futuro).
Para ello, empleamos el módulo 'react-router-dom' \cite{react-router-dom} que es el módulo
mas utilizado en la comunidad de React para implementar esta funcionalidad.
\\\\
\newpage
En un primer lugar se pensó introducir una página de error, pero ya que en principio solo hay una
página en toda la web, se han redirigido todas las rutas a la misma, el componente principal.

\begin{lstlisting}[caption={App.js}]
  <Router>
    <Switch>
      <Route exact path="/" component={Editor} />
      <Route exact path="/editor" component={Editor} />
      <Route component={Editor} />
    </Switch>
  </Router>
\end{lstlisting}

Aunque bastaría con emplear una única ruta se han especificado también las rutas '/' y '/editor' 
ya que, como se ha comentado antes, se planea extender la cantidad de páginas en un futuro.

\section{Componente Principal: Editor}

konva

