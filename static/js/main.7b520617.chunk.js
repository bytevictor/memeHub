(this.webpackJsonpmemehub=this.webpackJsonpmemehub||[]).push([[0],{165:function(e,t,a){},264:function(e,t,a){},266:function(e,t,a){},268:function(e,t,a){},607:function(e,t,a){"use strict";a.r(t);var s=a(0),i=a.n(s),n=a(13),r=a.n(n),o=(a(264),a(242)),l=a(23),c=(a(265),a(266),a(24)),d=a(19),h=a(29),u=a(28),b=a(63);a(165);function g(e){return-1!==["image/jpeg","image/jpg","image/png","image/webp","image/gif"].indexOf(e.type)}var f=a(2),p=function(e){e.preventDefault()},m=function(e){e.preventDefault(),e.target.classList.toggle("shake")},j=function(e){e.preventDefault(),e.target.classList.toggle("shake")},x=function(e){Object(h.a)(a,e);var t=Object(u.a)(a);function a(e){var s;return Object(c.a)(this,a),(s=t.call(this,e)).imgLoader=e.imgLoader.bind(Object(b.a)(s)),s}return Object(d.a)(a,[{key:"fileDrop",value:function(e){var t=this;e.preventDefault(),console.log(e),e.target.classList.toggle("shake");var a=e.dataTransfer.files;if(a.length&&g(a[0])){var s=new FileReader;s.readAsDataURL(a[0]),s.onload=function(e){var a=new Image;a.src=e.target.result,a.onload=function(){t.imgLoader(a)}}}}},{key:"render",value:function(){return Object(f.jsx)("div",{className:"drop-container ",id:"maindropcontainer",onDragOver:p,onDragEnter:m,onDragLeave:j,onDrop:this.fileDrop.bind(this),children:Object(f.jsxs)("div",{className:"drop-message d-flex flex-column justify-content-center",children:[Object(f.jsx)("div",{className:"upload-icon m-4 align-self-center"}),Object(f.jsx)("span",{className:"w-100",children:"Drag & Drop to start editing!"}),Object(f.jsx)("span",{children:"Or press Ctrl + V to add from clipboard!"})]})})}}]),a}(i.a.Component),v=(a(268),a(243)),S=a(649),y=a(238),k=a.n(y),C=a(239),w=a.n(C),O=a(611),R=a(240),U=a.n(R),N=a(241),V=a.n(N),T=a(651),D=a(665),F=a(662),A=a(654),z=a(226),L=a.n(z),M=a(228),B=a.n(M),W=a(225),I=a.n(W),P=a(227),E=a.n(P),H=a(229),K=a.n(H);function G(e){var t=e.toolUpdater,a=Object(v.a)({palette:{type:"dark"}});return Object(f.jsx)(S.a,{theme:a,children:Object(f.jsxs)(D.a,{value:e.tool,exclusive:!0,onChange:function(e,a){null!==a&&t(a)},"aria-label":"text alignment",orientation:"vertical",className:"menuherramientas",children:[Object(f.jsx)(T.a,{value:"SelectorAndText","aria-label":"Selector",children:Object(f.jsx)(F.a,{title:"Selector and Text creator",placement:"left",TransitionComponent:A.a,arrow:!0,children:Object(f.jsx)(I.a,{})})}),Object(f.jsx)(T.a,{value:"FreeLine","aria-label":"FreeLine",children:Object(f.jsx)(F.a,{title:"Free Line",placement:"left",TransitionComponent:A.a,arrow:!0,children:Object(f.jsx)(L.a,{})})}),Object(f.jsx)(T.a,{value:"StraightLine","aria-label":"StraightLine",children:Object(f.jsx)(F.a,{title:"Straight Line",placement:"left",TransitionComponent:A.a,arrow:!0,children:Object(f.jsx)(E.a,{})})}),Object(f.jsx)(T.a,{value:"Rectangle","aria-label":"Rectangle",children:Object(f.jsx)(F.a,{title:"Rectangle",placement:"left",TransitionComponent:A.a,arrow:!0,children:Object(f.jsx)(B.a,{})})}),Object(f.jsx)(T.a,{value:"Ellipse","aria-label":"Ellipse",children:Object(f.jsx)(F.a,{title:"Ellipse",placement:"left",TransitionComponent:A.a,arrow:!0,children:Object(f.jsx)(K.a,{})})})]})})}var q=a(659),Y=a(656),J=a(17),X=a(655),_=a(663),Z=a(658),Q=a(657);a(220);function $(e){var t=Object(s.createRef)(),a=(e.updater,e.toolbarHandler);return Object(f.jsxs)(Z.a,{className:"my-2 d-flex flex-wrap",size:"small","aria-label":"small outlined button group",orientation:"vertical",children:[Object(f.jsx)(O.a,{onClick:function(){t.current.value=parseInt(t.current.value)+1,a(t.current.value)},children:"+"}),Object(f.jsx)(Q.a,{inputRef:t,label:"Size",type:"number",value:e.value,defaultValue:70,onChange:function(e){var t=e.target.value;Number.isInteger(parseInt(t))&&parseInt(t)>0&&a(parseInt(t))},InputLabelProps:{shrink:!0},inputProps:{style:{textAlign:"center"}},variant:"outlined",style:{width:"60px"}}),Object(f.jsx)(O.a,{onClick:function(){var e=t.current.value;e>1&&(t.current.value=e-1,a(t.current.value))},children:"-"})]})}var ee=a(232),te=a.n(ee),ae=a(233),se=a.n(ae),ie=a(234),ne=a.n(ie);function re(e){e.updater;var t=e.toolbarHandler;return Object(f.jsxs)(D.a,{className:e.className,value:e.value,exclusive:!0,size:"small",onChange:t,"aria-label":"text alignment",children:[Object(f.jsx)(T.a,{value:"left","aria-label":"left aligned",children:Object(f.jsx)(te.a,{})}),Object(f.jsx)(T.a,{value:"center","aria-label":"centered",children:Object(f.jsx)(se.a,{})}),Object(f.jsx)(T.a,{value:"right","aria-label":"right aligned",children:Object(f.jsx)(ne.a,{})})]})}var oe=a(156),le=a.n(oe),ce=a(37),de=a(235),he=a(236),ue=a(18),be=a(612),ge=a(618),fe=a(617),pe=a(664),me=a(614);function je(e){e.updater;var t=e.toolbarHandler,a=Object(s.useState)([]),i=Object(ue.a)(a,2),n=i[0],r=i[1],o=new Set(["Arial","Arial Black","Bahnschrift","Calibri","Cambria","Cambria Math","Candara","Comic Sans MS","Consolas","Constantia","Corbel","Courier New","Ebrima","Franklin Gothic Medium","Gabriola","Gadugi","Georgia","HoloLens MDL2 Assets","Impact","Ink Free","Javanese Text","Leelawadee UI","Lucida Console","Lucida Sans Unicode","Malgun Gothic","Marlett","Microsoft Himalaya","Microsoft JhengHei","Microsoft New Tai Lue","Microsoft PhagsPa","Microsoft Sans Serif","Microsoft Tai Le","Microsoft YaHei","Microsoft Yi Baiti","MingLiU-ExtB","Mongolian Baiti","MS Gothic","MV Boli","Myanmar Text","Nirmala UI","Palatino Linotype","Segoe MDL2 Assets","Segoe Print","Segoe Script","Segoe UI","Segoe UI Historic","Segoe UI Emoji","Segoe UI Symbol","SimSun","Sitka","Sylfaen","Symbol","Tahoma","Times New Roman","Trebuchet MS","Verdana","Webdings","Wingdings","Yu Gothic","American Typewriter","Andale Mono","Arial","Arial Black","Arial Narrow","Arial Rounded MT Bold","Arial Unicode MS","Avenir","Avenir Next","Avenir Next Condensed","Baskerville","Big Caslon","Bodoni 72","Bodoni 72 Oldstyle","Bodoni 72 Smallcaps","Bradley Hand","Brush Script MT","Chalkboard","Chalkboard SE","Chalkduster","Charter","Cochin","Comic Sans MS","Copperplate","Courier","Courier New","Didot","DIN Alternate","DIN Condensed","Futura","Geneva","Georgia","Gill Sans","Helvetica","Helvetica Neue","Herculanum","Hoefler Text","Impact","Lucida Grande","Luminari","Marker Felt","Menlo","Microsoft Sans Serif","Monaco","Noteworthy","Optima","Palatino","Papyrus","Phosphate","Rockwell","Savoye LET","SignPainter","Skia","Snell Roundhand","Tahoma","Times","Times New Roman","Trattatello","Trebuchet MS","Verdana","Zapfino"].sort());Object(s.useEffect)((function(){0==n.length&&Object(he.a)(le.a.mark((function e(){var t,a,s,i;return le.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,document.fonts.ready;case 2:t=new Set,a=Object(de.a)(o.values());try{for(a.s();!(s=a.n()).done;)i=s.value,document.fonts.check('12px "'.concat(i,'"'))&&t.add(i)}catch(n){a.e(n)}finally{a.f()}r(Array.from(t)),console.log("Available Fonts:",Object(ce.a)(t.values()));case 7:case"end":return e.stop()}}),e)})))()}));return Object(f.jsxs)(be.a,{className:e.className,children:[Object(f.jsx)(ge.a,{children:"Font"}),Object(f.jsx)(fe.a,{value:e.value,onChange:function(e){t(e.target.value)},children:n.map((function(e,t){return Object(f.jsx)(pe.a,{value:e,style:{fontFamily:e},children:e},t)}))}),Object(f.jsx)(me.a,{children:"Choose your font"})]})}var xe=a(609),ve=function(e){Object(h.a)(a,e);var t=Object(u.a)(a);function a(e){var i;return Object(c.a)(this,a),(i=t.call(this,e)).handleAlignmentChange=function(e,t){null!=t&&(i.setState({alignment:t}),i.props.alignmentUpdater(t))},i.handleFontFamilyChange=function(e){i.setState({font:e}),i.props.fontFamilyUpdater(e)},i.handleFontSizeChange=function(e){i.setState({fontSize:e}),i.props.fontSizeUpdater(e)},i.handleFontColorChange=function(e){i.setState({fontColor:e}),i.props.fontColorUpdater(e)},i.handleStrokeColorChange=function(e){i.setState({strokeColor:e}),i.props.strokeColorUpdater(e)},i.handleStrokeSizeChange=function(e,t){i.state.strokeWidth!=t&&(i.props.strokeSizeUpdater(t),i.setState({strokeWidth:t}))},i.strokeSliderRef=Object(s.createRef)(),i.state={alignment:"center",font:"Impact",fontSize:70,fontColor:Object(J.b)("#FFFFFF"),strokeColor:Object(J.b)("#000000"),strokeWidth:0},i}return Object(d.a)(a,[{key:"changeAlignment",value:function(e){this.state.alignment!=e&&this.setState({alignment:e})}},{key:"changeFont",value:function(e){this.state.font!=e&&this.setState({font:e})}},{key:"changeFontSize",value:function(e){this.state.fontSize!=e&&this.setState({fontSize:e})}},{key:"changeFontColor",value:function(e){this.state.fontColor!=e&&this.setState({fontColor:Object(J.b)(e)})}},{key:"changeStrokeColor",value:function(e){this.state.strokeColor!=e&&this.setState({strokeColor:Object(J.b)(e)})}},{key:"changeStroke",value:function(e){this.state.strokeWidth!=e&&this.setState({strokeWidth:e})}},{key:"updateToolbar",value:function(e,t,a,s,i,n){console.log(this),null!=e&&this.changeAlignment(e),null!=t&&this.changeFont(t),null!=a&&this.changeFontSize(a),null!=s&&this.changeFontColor(s),null!=i&&this.changeStrokeColor(i),null!=n&&this.changeStroke(n)}},{key:"render",value:function(){var e=this.props.classes;return Object(f.jsx)("div",{id:"bottomtoolbar",className:e.root,children:Object(f.jsxs)(q.a,{container:!0,spacing:0,justify:"space-evenly",children:[Object(f.jsx)(q.a,{item:!0,xs:7,sm:6,md:4,children:Object(f.jsxs)(Y.a,{className:"m-3 d-flex justify-content-around align-items-center",elevation:3,children:[Object(f.jsx)(re,{toolbarHandler:this.handleAlignmentChange.bind(this),value:this.state.alignment}),Object(f.jsx)("div",{className:"",children:Object(f.jsx)(je,{className:"w-100",toolbarHandler:this.handleFontFamilyChange.bind(this),value:this.state.font})}),Object(f.jsx)($,{toolbarHandler:this.handleFontSizeChange.bind(this),value:this.state.fontSize})]})}),Object(f.jsx)(q.a,{item:!0,xs:5,sm:6,md:5,className:"d-flex",children:Object(f.jsxs)(Y.a,{className:"m-3 p-2 d-flex justify-content-around align-items-center flex-grow-1",elevation:3,children:[Object(f.jsxs)(Y.a,{className:"p-2 d-flex flex-column justify-content-around align-items-center",variant:"outlined",children:[Object(f.jsx)(X.a,{className:e.title,color:"textSecondary",gutterBottom:!0,children:"Font Color"}),Object(f.jsx)(J.a,{defaultValue:this.state.fontColor,value:this.state.fontColor,onChange:this.handleFontColorChange.bind(this),hideTextfield:!0})]}),Object(f.jsxs)(Y.a,{className:"p-2 d-flex flex-column justify-content-around align-items-center",variant:"outlined",children:[Object(f.jsx)(X.a,{className:e.title,color:"textSecondary",gutterBottom:!0,children:"Stroke Color"}),Object(f.jsx)(J.a,{defaultValue:this.state.strokeColor,value:this.state.strokeColor,onChange:this.handleStrokeColorChange.bind(this),hideTextfield:!0})]}),Object(f.jsxs)(Y.a,{className:"p-2 w-50",variant:"outlined",children:[Object(f.jsx)(X.a,{className:e.title,color:"textSecondary",gutterBottom:!0,children:"Stroke Width"}),Object(f.jsx)("div",{className:"m-2 pr-2",children:Object(f.jsx)(_.a,{ref:this.strokeSliderRef,defaultValue:0,value:this.state.strokeWidth,"aria-labelledby":"discrete-slider",valueLabelDisplay:"auto",step:1,marks:!0,min:0,max:15,onChange:this.handleStrokeSizeChange.bind(this)})})]})]})})]})})}}]),a}(i.a.Component),Se=Object(xe.a)((function(e){return{root:{flexGrow:0},paper:{padding:e.spacing(0),textAlign:"center",color:e.palette.text.secondary},title:{fontSize:14}}}))(ve);function ye(e,t){return Array.isArray(e)&&Array.isArray(t)&&e.length===t.length&&e.every((function(e,a){return e===t[a]}))}var ke=function(e){Object(h.a)(a,e);var t=Object(u.a)(a);function a(e){var s;return Object(c.a)(this,a),(s=t.call(this,e)).handleStrokeColorChange=function(e){s.setState({strokeColor:e}),s.props.strokeColorUpdater(e)},s.handleShadowColorChange=function(e){s.setState({shadowColor:e}),s.props.shadowColorUpdater(e)},s.handleStrokeSizeChange=function(e,t){s.state.strokeWidth!=t&&(s.props.strokeSizeUpdater(t),s.setState({strokeWidth:t}))},s.handleShadowSizeChange=function(e,t){s.state.shadowSize!=t&&(s.props.shadowSizeUpdater(t),s.setState({shadowWidth:t}))},s.handleDashChange=function(e){var t=e.target.value;console.log("Cambiando ",t),s.state.dash!=t&&(s.setState({dashValue:t}),s.props.dashUpdater(t))},s.state={strokeColor:Object(J.b)("#000000"),strokeWidth:6,shadowColor:Object(J.b)("#000000"),shadowWidth:0,dashValue:!1},s.dashValues={continuous:!1,dashLine:[35,30],dotLine:[.001,30],dashAndDots:[29,25,.001,25]},s}return Object(d.a)(a,[{key:"changeStrokeColor",value:function(e){this.state.strokeColor!=e&&this.setState({strokeColor:Object(J.b)(e)})}},{key:"changeStroke",value:function(e){this.state.strokeWidth!=e&&this.setState({strokeWidth:e})}},{key:"changeShadowColor",value:function(e){this.state.shadowColor!=e&&this.setState({shadowColor:Object(J.b)(e)})}},{key:"changeShadowWidth",value:function(e){this.state.shadowWidth!=e&&this.setState({shadowWidth:e})}},{key:"changeDash",value:function(e){this.state.dashValue!=e&&this.setState({dashValue:e})}},{key:"updateToolbar",value:function(e,t,a,s,i){null!=e&&this.changeStrokeColor(e),null!=t&&this.changeStroke(t),null!=a&&this.changeShadowColor(a),null!=s&&this.changeShadowWidth(s),null!=i&&(i==this.dashValues.continuous?this.changeDash(this.dashValues.continuous):ye(i,this.dashValues.dashLine)?this.changeDash(this.dashValues.dashLine):ye(i,this.dashValues.dotLine)?this.changeDash(this.dashValues.dotLine):ye(i,this.dashValues.dashAndDots)&&this.changeDash(this.dashValues.dashAndDots))}},{key:"render",value:function(){var e=this.props.classes;return Object(f.jsx)("div",{id:"bottomtoolbar",className:e.root,children:Object(f.jsxs)(q.a,{container:!0,spacing:0,justify:"space-evenly",children:[Object(f.jsx)(q.a,{item:!0,xs:4,sm:4,md:4,className:"d-flex",children:Object(f.jsxs)(Y.a,{className:"m-3 p-2 d-flex justify-content-around align-items-center flex-grow-1",elevation:3,children:[Object(f.jsxs)(Y.a,{className:"p-2 d-flex flex-column justify-content-around align-items-center",variant:"outlined",children:[Object(f.jsx)(X.a,{className:e.title,color:"textSecondary",gutterBottom:!0,children:"Shadow Color"}),Object(f.jsx)(J.a,{defaultValue:this.state.shadowColor,value:this.state.shadowColor,onChange:this.handleShadowColorChange.bind(this),hideTextfield:!0})]}),Object(f.jsxs)(Y.a,{className:"p-2 w-50",variant:"outlined",children:[Object(f.jsx)(X.a,{className:e.title,color:"textSecondary",gutterBottom:!0,children:"Shadow Width"}),Object(f.jsx)("div",{className:"m-2 pr-2",children:Object(f.jsx)(_.a,{value:this.state.shadowWidth,"aria-labelledby":"discrete-slider",valueLabelDisplay:"auto",step:2,marks:!0,min:0,max:30,onChange:this.handleShadowSizeChange.bind(this)})})]})]})}),Object(f.jsx)(q.a,{item:!0,xs:4,sm:4,md:4,className:"d-flex",children:Object(f.jsx)(Y.a,{className:"m-3 p-2 d-flex justify-content-around align-items-center flex-grow-1",elevation:3,children:Object(f.jsxs)(Y.a,{className:"p-2 w-50",variant:"outlined",children:[Object(f.jsx)(X.a,{className:e.title,color:"textSecondary",gutterBottom:!0,children:"Line Type"}),Object(f.jsx)("div",{className:"m-2 pr-2",children:Object(f.jsxs)(fe.a,{className:"w-100",id:"dashSelector",value:this.state.dashValue,defaultValue:!1,onChange:this.handleDashChange.bind(this),label:"Age",children:[Object(f.jsx)(pe.a,{value:this.dashValues.continuous,children:"Continuous"}),Object(f.jsx)(pe.a,{value:this.dashValues.dashLine,children:"Dashed"}),Object(f.jsx)(pe.a,{value:this.dashValues.dotLine,children:"Dots"}),Object(f.jsx)(pe.a,{value:this.dashValues.dashAndDots,children:"Dash & Dots"})]})})]})})}),Object(f.jsx)(q.a,{item:!0,xs:4,sm:4,md:4,className:"d-flex",children:Object(f.jsxs)(Y.a,{className:"m-3 p-2 d-flex justify-content-around align-items-center flex-grow-1",elevation:3,children:[Object(f.jsxs)(Y.a,{className:"p-2 d-flex flex-column justify-content-around align-items-center",variant:"outlined",children:[Object(f.jsx)(X.a,{className:e.title,color:"textSecondary",gutterBottom:!0,children:"Stroke Color"}),Object(f.jsx)(J.a,{defaultValue:this.state.strokeColor,value:this.state.strokeColor,onChange:this.handleStrokeColorChange.bind(this),hideTextfield:!0})]}),Object(f.jsxs)(Y.a,{className:"p-2 w-50",variant:"outlined",children:[Object(f.jsx)(X.a,{className:e.title,color:"textSecondary",gutterBottom:!0,children:"Stroke Width"}),Object(f.jsx)("div",{className:"m-2 pr-2",children:Object(f.jsx)(_.a,{defaultValue:6,value:this.state.strokeWidth,"aria-labelledby":"discrete-slider",valueLabelDisplay:"auto",step:1,marks:!0,min:1,max:30,onChange:this.handleStrokeSizeChange.bind(this)})})]})]})})]})})}}]),a}(i.a.Component),Ce=Object(xe.a)((function(e){return{root:{flexGrow:0},paper:{padding:e.spacing(0),textAlign:"center",color:e.palette.text.secondary},title:{fontSize:14}}}))(ke);var we=function(e){Object(h.a)(a,e);var t=Object(u.a)(a);function a(e){var s;return Object(c.a)(this,a),(s=t.call(this,e)).handleStrokeColorChange=function(e){s.setState({strokeColor:e}),s.props.strokeColorUpdater(e)},s.handleShadowColorChange=function(e){s.setState({shadowColor:e}),s.props.shadowColorUpdater(e)},s.handleStrokeSizeChange=function(e,t){s.state.strokeWidth!=t&&(s.props.strokeSizeUpdater(t),s.setState({strokeWidth:t}))},s.handleShadowSizeChange=function(e,t){s.state.shadowSize!=t&&(s.props.shadowSizeUpdater(t),s.setState({shadowWidth:t}))},s.handleCornerRadiusChange=function(e,t){s.state.cornerRadius!=t&&(s.props.cornerRadiusUpdater(t),s.setState({cornerRadius:t}))},s.handleFillChange=function(e){s.state.fill!=e&&(s.props.fillUpdater(e),s.setState({fill:e}))},s.state={strokeColor:Object(J.b)("#000000"),strokeWidth:6,shadowColor:Object(J.b)("#000000"),shadowWidth:0,cornerRadius:0,fill:Object(J.b)("#00000000")},s}return Object(d.a)(a,[{key:"changeStrokeColor",value:function(e){this.state.strokeColor!=e&&this.setState({strokeColor:Object(J.b)(e)})}},{key:"changeStroke",value:function(e){this.state.strokeWidth!=e&&this.setState({strokeWidth:e})}},{key:"changeShadowColor",value:function(e){this.state.shadowColor!=e&&this.setState({shadowColor:Object(J.b)(e)})}},{key:"changeShadowWidth",value:function(e){this.state.shadowWidth!=e&&this.setState({shadowWidth:e})}},{key:"changeCornerRadius",value:function(e){this.state.cornerRadius!=e&&this.setState({cornerRadius:e})}},{key:"changeFill",value:function(e){this.state.fill!=e&&this.setState({fill:Object(J.b)(e)})}},{key:"updateToolbar",value:function(e,t,a,s,i,n){null!=e&&this.changeStrokeColor(e),null!=t&&this.changeStroke(t),null!=a&&this.changeShadowColor(a),null!=s&&this.changeShadowWidth(s),null!=i&&this.changeCornerRadius(i),null!=n&&this.changeFill(n)}},{key:"render",value:function(){var e=this.props.classes;return Object(f.jsx)("div",{id:"bottomtoolbar",className:e.root,children:Object(f.jsxs)(q.a,{container:!0,spacing:0,justify:"space-evenly",children:[Object(f.jsx)(q.a,{item:!0,xs:4,sm:4,md:4,className:"d-flex",children:Object(f.jsxs)(Y.a,{className:"m-3 p-2 d-flex justify-content-around align-items-center flex-grow-1",elevation:3,children:[Object(f.jsxs)(Y.a,{className:"p-2 d-flex flex-column justify-content-around align-items-center",variant:"outlined",children:[Object(f.jsx)(X.a,{className:e.title,color:"textSecondary",gutterBottom:!0,children:"Shadow Color"}),Object(f.jsx)(J.a,{defaultValue:this.state.shadowColor,value:this.state.shadowColor,onChange:this.handleShadowColorChange.bind(this),hideTextfield:!0})]}),Object(f.jsxs)(Y.a,{className:"p-2 w-50",variant:"outlined",children:[Object(f.jsx)(X.a,{className:e.title,color:"textSecondary",gutterBottom:!0,children:"Shadow Width"}),Object(f.jsx)("div",{className:"m-2 pr-2",children:Object(f.jsx)(_.a,{value:this.state.shadowWidth,"aria-labelledby":"discrete-slider",valueLabelDisplay:"auto",step:2,marks:!0,min:0,max:30,onChange:this.handleShadowSizeChange.bind(this)})})]})]})}),Object(f.jsx)(q.a,{item:!0,xs:4,sm:4,md:4,className:"d-flex",children:Object(f.jsxs)(Y.a,{className:"m-3 p-2 d-flex justify-content-around align-items-center flex-grow-1",elevation:3,children:[Object(f.jsxs)(Y.a,{className:"p-2 d-flex flex-column justify-content-around align-items-center",variant:"outlined",children:[Object(f.jsx)(X.a,{className:e.title,color:"textSecondary",gutterBottom:!0,children:"Fill Color"}),Object(f.jsx)(J.a,{defaultValue:this.state.fill,value:this.state.fill,onChange:this.handleFillChange.bind(this),hideTextfield:!0})]}),Object(f.jsxs)(Y.a,{className:"p-2 w-50",variant:"outlined",children:[Object(f.jsx)(X.a,{className:e.title,color:"textSecondary",gutterBottom:!0,children:"Corner Radius"}),Object(f.jsx)("div",{className:"m-2 pr-2",children:Object(f.jsx)(_.a,{value:this.state.cornerRadius,"aria-labelledby":"discrete-slider",valueLabelDisplay:"auto",step:1,marks:!0,min:0,max:60,onChange:this.handleCornerRadiusChange.bind(this),disabled:this.props.disableCornerRadius})})]})]})}),Object(f.jsx)(q.a,{item:!0,xs:4,sm:4,md:4,className:"d-flex",children:Object(f.jsxs)(Y.a,{className:"m-3 p-2 d-flex justify-content-around align-items-center flex-grow-1",elevation:3,children:[Object(f.jsxs)(Y.a,{className:"p-2 d-flex flex-column justify-content-around align-items-center",variant:"outlined",children:[Object(f.jsx)(X.a,{className:e.title,color:"textSecondary",gutterBottom:!0,children:"Stroke Color"}),Object(f.jsx)(J.a,{defaultValue:this.state.strokeColor,value:this.state.strokeColor,onChange:this.handleStrokeColorChange.bind(this),hideTextfield:!0})]}),Object(f.jsxs)(Y.a,{className:"p-2 w-50",variant:"outlined",children:[Object(f.jsx)(X.a,{className:e.title,color:"textSecondary",gutterBottom:!0,children:"Stroke Width"}),Object(f.jsx)("div",{className:"m-2 pr-2",children:Object(f.jsx)(_.a,{defaultValue:6,value:this.state.strokeWidth,"aria-labelledby":"discrete-slider",valueLabelDisplay:"auto",step:1,marks:!0,min:1,max:30,onChange:this.handleStrokeSizeChange.bind(this)})})]})]})})]})})}}]),a}(i.a.Component),Oe=Object(xe.a)((function(e){return{root:{flexGrow:0},paper:{padding:e.spacing(0),textAlign:"center",color:e.palette.text.secondary},title:{fontSize:14}}}))(we);var Re=function(e){Object(h.a)(a,e);var t=Object(u.a)(a);function a(e){var s;return Object(c.a)(this,a),(s=t.call(this,e)).handleStrokeColorChange=function(e){s.setState({strokeColor:e}),s.props.strokeColorUpdater(e)},s.handleShadowColorChange=function(e){s.setState({shadowColor:e}),s.props.shadowColorUpdater(e)},s.handleStrokeSizeChange=function(e,t){s.state.strokeWidth!=t&&(s.props.strokeSizeUpdater(t),s.setState({strokeWidth:t}))},s.handleShadowSizeChange=function(e,t){s.state.shadowSize!=t&&(s.props.shadowSizeUpdater(t),s.setState({shadowWidth:t}))},s.handleFilterChange=function(e){var t=e.target.value;switch(console.log("Cambiando ",t),console.log(s.state),t){case"Blur":s.setState({selectedFilter:t,selectedFilterValue:s.state.blurValue,sliderMin:0,sliderMax:50,sliderStep:1});break;case"Brightness":s.setState({selectedFilter:t,selectedFilterValue:s.state.brightenValue,sliderMin:-1,sliderMax:1,sliderStep:.05});break;case"Noise":s.setState({selectedFilter:t,selectedFilterValue:s.state.noiseValue,sliderMin:0,sliderMax:5,sliderStep:.2});break;case"Pixelate":s.setState({selectedFilter:t,selectedFilterValue:s.state.pixelSizeValue,sliderMin:1,sliderMax:50,sliderStep:1});break;case"Mask":s.setState({selectedFilter:t,selectedFilterValue:s.state.thresholdValue,sliderMin:0,sliderMax:300,sliderStep:1})}console.log(s.state)},s.handleFilterValueChange=function(e,t){if(s.state.selectedFilterValue!=t)switch(s.state.selectedFilter){case"Blur":s.props.blurValueUpdater(t),s.setState({selectedFilterValue:t,blurValue:t});break;case"Brightness":s.props.brightnessValueUpdater(t),s.setState({selectedFilterValue:t,brightenValue:t});break;case"Noise":s.props.noiseValueUpdater(t),s.setState({selectedFilterValue:t,noiseValue:t});break;case"Pixelate":s.props.pixelValueUpdater(t),s.setState({selectedFilterValue:t,pixelSizeValue:t});break;case"Mask":s.props.maskValueUpdater(t),s.setState({selectedFilterValue:t,thresholdValue:t})}},s.state={strokeColor:Object(J.b)("#000000"),strokeWidth:0,shadowColor:Object(J.b)("#000000"),shadowWidth:0,selectedFilter:"Blur",sliderMin:0,sliderStep:1,sliderMax:50,selectedFilterValue:0,blurValue:0,brightenValue:0,pixelSizeValue:1,noiseValue:0,thresholdValue:0},s}return Object(d.a)(a,[{key:"changeStrokeColor",value:function(e){this.state.strokeColor!=e&&this.setState({strokeColor:Object(J.b)(e)})}},{key:"changeStroke",value:function(e){this.state.strokeWidth!=e&&this.setState({strokeWidth:e})}},{key:"changeShadowColor",value:function(e){this.state.shadowColor!=e&&this.setState({shadowColor:Object(J.b)(e)})}},{key:"changeShadowWidth",value:function(e){this.state.shadowWidth!=e&&this.setState({shadowWidth:e})}},{key:"changeBlurValue",value:function(e){this.state.blurValue!=e&&this.setState({blurValue:e})}},{key:"changeBrightnessValue",value:function(e){this.state.brightenValue!=e&&this.setState({brightenValue:e})}},{key:"changePixelSizeValue",value:function(e){this.state.pixelSizeValue!=e&&this.setState({pixelSizeValue:e})}},{key:"changeNoiseValue",value:function(e){this.state.noiseValue!=e&&this.setState({noiseValue:e})}},{key:"changeThresholdValue",value:function(e){this.state.thresholdValue!=e&&this.setState({thresholdValue:e})}},{key:"updateToolbar",value:function(e,t,a,s,i,n,r,o,l){null!=e&&this.changeStrokeColor(e),null!=t&&this.changeStroke(t),null!=a&&this.changeShadowColor(a),null!=s&&this.changeShadowWidth(s),null!=i&&(this.changeBlurValue(i),this.setState({selectedFilter:"Blur",selectedFilterValue:i})),null!=n&&this.changeBrightnessValue(n),null!=r&&this.changePixelSizeValue(r),null!=o&&this.changeNoiseValue(o),null!=l&&this.changeThresholdValue(l)}},{key:"render",value:function(){var e=this.props.classes;return Object(f.jsx)("div",{id:"bottomtoolbar",className:e.root,children:Object(f.jsx)(q.a,{container:!0,spacing:0,justify:"space-evenly",children:Object(f.jsx)(q.a,{item:!0,xs:12,sm:10,md:6,className:"d-flex",children:Object(f.jsx)(Y.a,{className:"m-3 p-2 d-flex justify-content-around align-items-center flex-grow-1",elevation:3,children:Object(f.jsxs)(Y.a,{className:"p-2 w-75",variant:"outlined",children:[Object(f.jsx)(X.a,{className:e.title,color:"textSecondary",gutterBottom:!0,children:"Image Filter"}),Object(f.jsxs)("div",{className:"d-flex",children:[Object(f.jsx)("div",{className:"m-2 pr-2 flex-grow-1",children:Object(f.jsxs)(fe.a,{className:"w-50",id:"dashSelector",value:this.state.selectedFilter,defaultValue:"Blur",onChange:this.handleFilterChange.bind(this),label:"Age",children:[Object(f.jsx)(pe.a,{value:"Blur",children:"Blur"}),Object(f.jsx)(pe.a,{value:"Brightness",children:"Brightness"}),Object(f.jsx)(pe.a,{value:"Noise",children:"Noise"}),Object(f.jsx)(pe.a,{value:"Pixelate",children:"Pixelate"}),Object(f.jsx)(pe.a,{value:"Mask",children:"Mask"})]})}),Object(f.jsx)("div",{className:"m-2 pr-2 w-50",children:Object(f.jsx)(_.a,{defaultValue:0,value:this.state.selectedFilterValue,"aria-labelledby":"discrete-slider",valueLabelDisplay:"auto",step:this.state.sliderStep,marks:!0,min:this.state.sliderMin,max:this.state.sliderMax,onChange:this.handleFilterValueChange.bind(this)})})]})]})})})})})}}]),a}(i.a.Component),Ue=Object(xe.a)((function(e){return{root:{flexGrow:0},paper:{padding:e.spacing(0),textAlign:"center",color:e.palette.text.secondary},title:{fontSize:14}}}))(Re),Ne=function(e){Object(h.a)(a,e);var t=Object(u.a)(a);function a(e){var i;return Object(c.a)(this,a),(i=t.call(this,e)).bottomToolbarRef=Object(s.createRef)(),i.fontSizeUpdater=e.fontSizeUpdater,i.fontColorUpdater=e.fontColorUpdater,i.strokeColorUpdater=e.strokeColorUpdater,i.strokeSizeUpdater=e.strokeSizeUpdater,i.fontFamilyUpdater=e.fontFamilyUpdater,i.alignmentUpdater=e.alignmentUpdater,i.shadowColorUpdater=e.shadowColorUpdater,i.shadowSizeUpdater=e.shadowSizeUpdater,i.dashUpdater=e.dashUpdater,i.cornerRadiusUpdater=e.cornerRadiusUpdater,i.fillUpdater=e.fillUpdater,i.blurValueUpdater=e.blurValueUpdater,i.brightnessValueUpdater=e.brightnessValueUpdater,i.noiseValueUpdater=e.noiseValueUpdater,i.pixelValueUpdater=e.pixelValueUpdater,i.maskValueUpdater=e.maskValueUpdater,i.state={selectedToolbar:"SelectorAndText"},i}return Object(d.a)(a,[{key:"changeBottomToolbar",value:function(e){this.setState({selectedToolbar:e})}},{key:"updateToolbar",value:function(){var e=this.bottomToolbarRef.current;return e.updateToolbar.bind(e)}},{key:"getBottomToolbar",value:function(){switch(this.state.selectedToolbar){case"SelectorAndText":return Object(f.jsx)(Se,{ref:this.bottomToolbarRef,fontSizeUpdater:this.fontSizeUpdater,fontColorUpdater:this.fontColorUpdater,strokeColorUpdater:this.strokeColorUpdater,strokeSizeUpdater:this.strokeSizeUpdater,fontFamilyUpdater:this.fontFamilyUpdater,alignmentUpdater:this.alignmentUpdater});case"FreeLine":case"StraightLine":return Object(f.jsx)(Ce,{ref:this.bottomToolbarRef,strokeColorUpdater:this.strokeColorUpdater,strokeSizeUpdater:this.strokeSizeUpdater,shadowColorUpdater:this.shadowColorUpdater,shadowSizeUpdater:this.shadowSizeUpdater,dashUpdater:this.dashUpdater});case"Rectangle":case"Ellipse":return Object(f.jsx)(Oe,{ref:this.bottomToolbarRef,disableCornerRadius:"Ellipse"==this.state.selectedToolbar,strokeColorUpdater:this.strokeColorUpdater,strokeSizeUpdater:this.strokeSizeUpdater,shadowColorUpdater:this.shadowColorUpdater,shadowSizeUpdater:this.shadowSizeUpdater,cornerRadiusUpdater:this.cornerRadiusUpdater,fillUpdater:this.fillUpdater});case"KonvaImage":return Object(f.jsx)(Ue,{ref:this.bottomToolbarRef,strokeColorUpdater:this.strokeColorUpdater,strokeSizeUpdater:this.strokeSizeUpdater,shadowColorUpdater:this.shadowColorUpdater,shadowSizeUpdater:this.shadowSizeUpdater,blurValueUpdater:this.blurValueUpdater,brightnessValueUpdater:this.brightnessValueUpdater,noiseValueUpdater:this.noiseValueUpdater,pixelValueUpdater:this.pixelValueUpdater,maskValueUpdater:this.maskValueUpdater})}}},{key:"render",value:function(){return Object(f.jsx)(i.a.Fragment,{children:this.getBottomToolbar()})}}]),a}(i.a.Component),Ve=a(660);a(44);function Te(e){var t=e.copyHandler,a=i.a.useState(!1),s=Object(ue.a)(a,2),n=s[0],r=s[1];return Object(f.jsx)(F.a,{title:"Copied to clipboard!",placement:"left",TransitionComponent:A.a,open:n,arrow:!0,children:Object(f.jsx)(O.a,{id:"copybutton",className:"ml-auto p-0",color:"grey",size:"medium",variant:e.enabled?"outlined":"contained",disabled:!!e.enabled,onClick:function(e){t(),r(!0),setTimeout((function(){r(!1)}),1500)},children:Object(f.jsx)(Ve.a,{})})})}var De=function(e){e.preventDefault()},Fe=function(e){e.preventDefault(),e.target.classList.toggle("shake")},Ae=function(e){e.preventDefault(),e.target.classList.toggle("shake")};function ze(e){var t=Object(s.useState)(0),a=Object(ue.a)(t,2),n=a[0],r=a[1],o=Object(s.useState)(0),l=Object(ue.a)(o,2),c=l[0],d=l[1],h=Object(s.useState)(),u=Object(ue.a)(h,2)[1],b=e.imgLoader,p=null;Object(s.useEffect)((function(){var e=document.getElementById("canvas-container").childNodes[2].firstChild.firstChild;return r(e.clientWidth),d(e.clientHeight),window.addEventListener("dragenter",m),window.addEventListener("dragleave",j),function(){window.removeEventListener("dragenter",m),window.removeEventListener("dragleave",j)}}));var m=function(e){e.preventDefault(),u(1),p=e.target,document.querySelector("#secondarydropbackground").style.visibility="",document.querySelector("#secondarydropbackground").style.opacity="0.8",document.querySelector("#secondarydropcontainer").style.visibility="",document.querySelector("#secondarydropcontainer").style.opacity="1"},j=function(e){e.preventDefault(),e.target===p&&x()},x=function(){document.querySelector("#secondarydropbackground").style.visibility="hidden",document.querySelector("#secondarydropbackground").style.opacity="0",document.querySelector("#secondarydropcontainer").style.visibility="hidden",document.querySelector("#secondarydropcontainer").style.opacity="0"};return Object(f.jsxs)(i.a.Fragment,{children:[Object(f.jsx)("div",{id:"secondarydropbackground",style:{visibility:"hidden"}}),Object(f.jsx)("div",{className:"drop-container",style:{width:n+"px",height:c+"px",visibility:"hidden"},id:"secondarydropcontainer",onDragOver:De,onDragEnter:Fe,onDragLeave:Ae,onDrop:function(e){e.preventDefault(),x(),console.log(e),e.target.classList.toggle("shake");var t=e.dataTransfer.files;if(t.length&&g(t[0])){var a=new FileReader;a.readAsDataURL(t[0]),a.onload=function(e){var t=new Image;t.src=e.target.result,t.onload=function(){b(null,t)}}}},children:Object(f.jsxs)("div",{className:"drop-message d-flex flex-column justify-content-center",children:[Object(f.jsx)("div",{className:"upload-icon m-4 align-self-center"}),Object(f.jsx)("span",{className:"w-100",children:"Drop an image to add it to the canvas"})]})})]})}var Le=a(33);function Me(e){if("Image"==e.target.className){console.log("CREANDO NUEVO TEXTO");var t=Object(f.jsx)(Be,{stage:this.stageRef,selectedItemChanger:this.changeSelectedItem.bind(this),text:"sample text",x:e.evt.offsetX-210,y:e.evt.offsetY-35,align:"center",fontFamily:"Impact",fontSize:70,fill:"white",stroke:"black",strokeWidth:2,draggable:!0},this.state.itemArray.length);this.state.itemArray.push(t),this.forceUpdate()}}function Be(e){var t=e.stage,a=e.selectedItemChanger,i=Object(s.createRef)();Object(s.useEffect)((function(){n(),a({type:"CvText",item:i.current})}),[]);var n=function(){var e=i.current,a=document.createElement("textarea");document.body.appendChild(a);var s=t.current.container().getBoundingClientRect();a.value=e.getAttr("text"),a.style.textAlign=e.align(),a.style.position="absolute";var n=e.getAbsolutePosition();a.style.top=s.top+n.y+"px",a.style.left=s.left+n.x+"px",a.style.width=e.width()+"px",a.style.height=e.height()+"px",a.style.fontSize=e.fontSize()+"px",a.style.color=e.fill(),a.style.webkitTextStroke=e.stroke(),a.style.webkitTextStrokeWidth=e.strokeWidth()+"px",a.style.margin="0px",a.style.padding="0px",a.style.lineHeight=e.lineHeight(),a.style.resize="none",a.style.background="none",a.style.border="none",a.style.outline="none",a.style.resize="none",a.style.lineHeight=e.lineHeight(),a.style.fontFamily=e.fontFamily(),a.style.transformOrigin="left top";var r=e.rotation(),o="";r&&(o+="rotateZ("+r+"deg)"),a.style.transform=o,e.hide(),a.focus(),a.setSelectionRange(0,a.value.length),t.current.batchDraw(),a.addEventListener("focusout",(function(s){e.setAttrs({text:a.value}),e.show(),t.current.batchDraw(),document.body.removeChild(a)}))};return Object(f.jsx)(Le.g,{ref:i,x:e.x,y:e.y,width:6*e.fontSize,height:1*e.fontSize,text:e.text,align:e.align,fontSize:e.fontSize,fontFamily:e.fontFamily,fill:e.fill,stroke:e.stroke,strokeWidth:e.strokeWidth,draggable:e.draggable,onTransform:function(){var e=i.current;e.setAttrs({width:e.width()*e.scaleX(),scaleX:1,height:e.height()*e.scaleY(),scaleY:1})},onDblClick:n,onDblTap:n})}function We(e){var t=this.transformerRef.current;console.log(e.target.className),t.isTransforming()||("Text"===e.target.className?this.changeSelectedItem({type:"CvText",item:e.target}):"Line"===e.target.className?this.changeSelectedItem({type:"Line",item:e.target}):"Rect"===e.target.className||"Ellipse"===e.target.className?this.changeSelectedItem({type:"Rect",item:e.target}):e.target!=this.kvMainImageRef.current?this.changeSelectedItem({type:"KonvaImage",item:e.target}):this.changeSelectedItem([]))}function Ie(e){var t=this.stageRef.current.getPointerPosition(),a=this.bottomToolbarRef.current.bottomToolbarRef.current,s=Object(f.jsx)(Le.d,{ref:this.lineRef,lineCap:"round",stroke:"#"+a.state.strokeColor.hex,strokeWidth:a.state.strokeWidth,globalCompositeOperation:"source-over",points:[t.x,t.y],shadowColor:"#"+a.state.shadowColor.hex,shadowBlur:a.state.shadowWidth,dash:a.state.dashValue,draggable:!0},this.state.itemArray.length);this.state.itemArray.push(s),this.setState({isDrawing:!0})}function Pe(e){if(this.state.isDrawing){var t=this.lineRef.current,a=this.stageRef.current.getPointerPosition(),s=t.points().concat([a.x,a.y]);t.points(s),this.stageRef.current.batchDraw()}}function Ee(e){this.setState({isDrawing:!1})}function He(e){var t=this.stageRef.current.getPointerPosition(),a=this.bottomToolbarRef.current.bottomToolbarRef.current,s=Object(f.jsx)(Le.d,{ref:this.lineRef,lineCap:"round",stroke:"#"+a.state.strokeColor.hex,strokeWidth:a.state.strokeWidth,globalCompositeOperation:"source-over",points:[t.x,t.y,t.x,t.y],shadowColor:"#"+a.state.shadowColor.hex,shadowBlur:a.state.shadowWidth,dash:a.state.dashValue,draggable:!0},this.state.itemArray.length);this.state.itemArray.push(s),this.setState({isDrawing:!0})}function Ke(e){if(this.state.isDrawing){var t=this.lineRef.current,a=this.stageRef.current.getPointerPosition(),s=t.points();s[2]=a.x,s[3]=a.y,t.points(s),this.stageRef.current.batchDraw()}}function Ge(e){this.setState({isDrawing:!1})}function qe(e){var t=this.stageRef.current.getPointerPosition(),a=this.bottomToolbarRef.current.bottomToolbarRef.current,s=Object(f.jsx)(Le.e,{ref:this.rectRef,x:t.x,y:t.y,width:0,height:0,fill:"#"+a.state.fill.hex,stroke:"#"+a.state.strokeColor.hex,strokeWidth:a.state.strokeWidth,shadowColor:"#"+a.state.shadowColor.hex,shadowBlur:a.state.shadowWidth,cornerRadius:a.state.cornerRadius,draggable:!0},this.state.itemArray.length);this.lastRectangle={x:t.x,y:t.y,width:0,height:0},this.state.itemArray.push(s),this.setState({isDrawing:!0})}function Ye(e){if(this.state.isDrawing){var t=this.rectRef.current,a=this.stageRef.current.getPointerPosition(),s=this.lastRectangle;s.width=a.x-s.x,s.height=a.y-s.y,t.setAttrs({x:s.width<0?s.x+s.width:s.x,y:s.height<0?s.y+s.height:s.y,width:Math.abs(s.width),height:Math.abs(s.height)}),this.stageRef.current.batchDraw()}}function Je(e){this.state.isDrawing&&this.setState({isDrawing:!1})}function Xe(e){var t=this.stageRef.current.getPointerPosition(),a=this.bottomToolbarRef.current.bottomToolbarRef.current,s=Object(f.jsx)(Le.a,{ref:this.rectRef,x:t.x,y:t.y,width:0,height:0,fill:"#"+a.state.fill.hex,stroke:"#"+a.state.strokeColor.hex,strokeWidth:a.state.strokeWidth,shadowColor:"#"+a.state.shadowColor.hex,shadowBlur:a.state.shadowWidth,cornerRadius:a.state.cornerRadius,draggable:!0},this.state.itemArray.length);this.lastRectangle={x:t.x,y:t.y,width:0,height:0},this.state.itemArray.push(s),this.setState({isDrawing:!0})}function _e(e){if(this.state.isDrawing){var t=this.rectRef.current,a=this.stageRef.current.getPointerPosition(),s=this.lastRectangle;s.width=a.x-s.x,s.height=a.y-s.y,t.setAttrs({x:(s.width,s.x+s.width/2),y:(s.height,s.y+s.height/2),width:Math.abs(s.width),height:Math.abs(s.height)}),this.stageRef.current.batchDraw()}}function Ze(e){this.state.isDrawing&&this.setState({isDrawing:!1})}var Qe=Object(v.a)({palette:{type:"dark",primary:k.a,secondary:w.a}}),$e=function(e){Object(h.a)(a,e);var t=Object(u.a)(a);function a(e){var i;return Object(c.a)(this,a),(i=t.call(this,e)).stageRef=Object(s.createRef)(),i.mainLayerRef=Object(s.createRef)(),i.kvMainImageRef=Object(s.createRef)(),i.transformerRef=Object(s.createRef)(),i.bottomToolbarRef=Object(s.createRef)(),i.lineRef=Object(s.createRef)(),i.rectRef=Object(s.createRef)(),i.lastRectAttrs={},i.state={image:null,itemArray:[],selectedTool:"SelectorAndText",isDrawing:!1},i}return Object(d.a)(a,[{key:"componentDidMount",value:function(){document.body.addEventListener("paste",this.handlePaste.bind(this)),this.stageRef.current.container().tabIndex=1,this.stageRef.current.container().addEventListener("keydown",this.handleKeyDown.bind(this))}},{key:"changeSelectedItem",value:function(e){if(null==e.item||null==e.type)console.log("Deselected"),this.transformerRef.current.nodes([]);else{console.log("Selecting: "+e.type),console.log(e.item),this.transformerRef.current.nodes([e.item]);var t=this.bottomToolbarRef.current,a=e.item.getAttrs();switch(e.type){case"CvText":this.changeBottomToolbar("SelectorAndText"),t.updateToolbar()(a.align,a.fontFamily,a.fontSize,a.fill,a.stroke,a.strokeWidth);break;case"Line":this.changeBottomToolbar("FreeLine"),t.updateToolbar()(a.stroke,a.strokeWidth,a.shadowColor,a.shadowBlur,a.dash);break;case"Rect":case"Ellipse":this.changeBottomToolbar("Rectangle"),t.updateToolbar()(a.stroke,a.strokeWidth,a.shadowColor,a.shadowBlur,a.cornerRadius,a.fill);break;case"KonvaImage":this.changeBottomToolbar("KonvaImage"),t.updateToolbar()(a.stroke,a.strokeWidth,a.shadowColor,a.shadowBlur,a.blurRadius,a.brightness,a.pixelSize,a.noise,a.threshold)}}}},{key:"changeBottomToolbar",value:function(e){var t=this.bottomToolbarRef.current;console.log("bottomToolbar changed to: "+e),t.changeBottomToolbar(e)}},{key:"calculate_resize",value:function(e,t,a){return e<=1?e*(t=t>400?t-100:t)<a?(a=e*t-100,t-=100):(t=a*(1/e)-100,a-=100):(a=a>400?a-100:a)*(1/e)<t?t=a*(1/e):a=e*(t-=100)-100,{width:t,height:a}}},{key:"imageLoader",value:function(e){this.stageRef.current.setAttrs({visible:!0}),this.setState({image:e});var t=e.height/e.width;console.log("correlation: "+t);var a=document.getElementById("canvas-container");console.log("width:"+a.clientWidth+" height: "+a.clientHeight);var s=a.clientWidth,i=a.clientHeight,n=this.calculate_resize(t,s,i);this.kvMainImageRef.current.setAttrs({image:e,width:n.width,height:n.height,x:0,y:0}),this.stageRef.current.setAttrs({width:n.width,height:n.height,visible:!0})}},{key:"imageUnloader",value:function(){this.changeSelectedItem([]),this.setState({image:null,itemArray:[]}),this.stageRef.current.setAttrs({width:1,height:1,visible:!1})}},{key:"imageDownloader",value:function(){this.changeSelectedItem([]);var e=this.stageRef.current.toDataURL({pixelRatio:1}),t=document.createElement("a");t.download="edit_memehub",t.href=e,t.click()}},{key:"imageCopytoClipboard",value:function(){this.changeSelectedItem([]);var e=function(e){for(var t=e.split(","),a=t[0].match(/:(.*?);/)[1],s=atob(t[1]),i=s.length,n=new Uint8Array(i);i--;)n[i]=s.charCodeAt(i);return new Blob([n],{type:a})}(this.stageRef.current.toDataURL({pixelRatio:1}));try{navigator.clipboard.write([new ClipboardItem({"image/png":e})])}catch(t){console.error(t)}}},{key:"deleteSelectedItem",value:function(){var e=this.transformerRef.current;null!=e&&null!=e.nodes()[0]&&(e.nodes()[0].destroy(),this.changeSelectedItem([]),this.stageRef.current.batchDraw())}},{key:"duplicateSelectedItem",value:function(){var e=this.transformerRef.current;if(null!=e&&null!=e.nodes()[0]){var t=e.nodes()[0];console.log(t);var a=i.a.cloneElement(t);console.log(a),this.state.itemArray.push(a),this.changeSelectedItem([a]),this.forceUpdate()}}},{key:"changeSelectedTool",value:function(e){null!=e&&(console.log("changed to: ",e),this.changeSelectedItem([]),this.setState({selectedTool:e}),this.changeBottomToolbar(e))}},{key:"createNewSecondaryImage",value:function(e,t){var a=.7,i=t.height/t.width,n=this.kvMainImageRef.current,r=n.getAttr("width"),o=n.getAttr("height"),l=this.calculate_resize(i,r,o),c=Object(s.createRef)(),d=Object(f.jsx)(Le.b,{ref:c,image:t,width:l.width*a,height:l.height*a,x:r/2-l.width*a/2,y:o/2-l.height*a/2,draggable:!0,filters:[Konva.Filters.Blur,Konva.Filters.Brighten,Konva.Filters.Noise,Konva.Filters.Pixelate,Konva.Filters.Mask],blurRadius:0,brightness:0,pixelSize:1,noise:0,threshold:0},this.state.itemArray.length);this.state.itemArray.push(d),this.forceUpdate();var h={type:"KonvaImage",item:c.current};this.changeSelectedTool("SelectorAndText"),this.changeSelectedItem(h)}},{key:"handlePaste",value:function(e){console.log(e);var t=e.clipboardData.files[0];if(console.log(t),null==t)return!1;null==this.state.image?this.handleMainPaste(e,t):this.handleSecondaryPaste(e,t)}},{key:"handleMainPaste",value:function(e,t){var a=this;if(g(t)){var s=new FileReader;s.readAsDataURL(t),s.onload=function(e){var t=new window.Image;t.src=e.target.result,t.onload=function(){a.imageLoader(t)}}}}},{key:"handleSecondaryPaste",value:function(e,t){var a=this;if(g(t)){var s=new FileReader;s.readAsDataURL(t),s.onload=function(e){var t=new window.Image;t.src=e.target.result,t.onload=function(){a.createNewSecondaryImage(e,t)}}}}},{key:"handleCtrlplusKey",value:function(e){var t=String.fromCharCode(e.which).toLowerCase();e.ctrlKey&&"c"===t?(console.log("Ctrl + C pressed"),this.duplicateSelectedItem()):e.ctrlKey&&"s"===t&&(e.preventDefault(),console.log("Ctrl + S pressed"))}},{key:"handleDelete",value:function(e){8!==e.keyCode&&46!==e.keyCode||this.deleteSelectedItem()}},{key:"handleKeyDown",value:function(e){this.handleDelete(e),this.handleCtrlplusKey(e)}},{key:"handleCanvasMouseDown",value:function(e){switch(this.state.selectedTool){case"SelectorAndText":We.bind(this)(e);break;case"FreeLine":Ie.bind(this)(e);break;case"StraightLine":He.bind(this)(e);break;case"Rectangle":qe.bind(this)(e);break;case"Ellipse":Xe.bind(this)(e)}}},{key:"handleCanvasMouseUp",value:function(e){switch(this.state.selectedTool){case"FreeLine":Ee.bind(this)(e);break;case"StraightLine":Ge.bind(this)(e);break;case"Rectangle":Je.bind(this)(e);break;case"Ellipse":Ze.bind(this)(e)}}},{key:"handleCanvasMouseMove",value:function(e){switch(this.state.selectedTool){case"FreeLine":Pe.bind(this)(e);break;case"StraightLine":Ke.bind(this)(e);break;case"Rectangle":Ye.bind(this)(e);break;case"Ellipse":_e.bind(this)(e)}}},{key:"handleCanvasMouseLeave",value:function(e){"FreeLine"==this.state.selectedTool&&Ee.bind(this)(e)}},{key:"handleCanvasDblClick",value:function(e){"SelectorAndText"==this.state.selectedTool&&(console.log("dobleclick"),Me.bind(this)(e))}},{key:"updateTextSize",value:function(e){var t=this.transformerRef.current.nodes()[0];null!=t&&parseInt(e)>0&&(t.setAttr("fontSize",parseInt(e)),t.getStage().batchDraw())}},{key:"updateTextColor",value:function(e){var t=this.transformerRef.current.nodes()[0];null!=t&&(t.setAttr("fill","#"+e.hex),t.getStage().batchDraw())}},{key:"updateStrokeColor",value:function(e){var t=this.transformerRef.current.nodes()[0];null!=t&&(t.setAttr("stroke","#"+e.hex),t.getStage().batchDraw())}},{key:"updateStrokeSize",value:function(e){var t=this.transformerRef.current.nodes()[0];null!=t&&(t.setAttr("strokeWidth",e),t.getStage().batchDraw())}},{key:"updateShadowColor",value:function(e){var t=this.transformerRef.current.nodes()[0];null!=t&&(t.setAttr("shadowColor","#"+e.hex),t.getStage().batchDraw())}},{key:"updateDash",value:function(e){var t=this.transformerRef.current.nodes()[0];null!=t&&(t.setAttr("dash",e),t.getStage().batchDraw())}},{key:"updateShadowSize",value:function(e){var t=this.transformerRef.current.nodes()[0];null!=t&&(t.setAttr("shadowBlur",e),t.getStage().batchDraw())}},{key:"updateFontFamily",value:function(e){var t=this.transformerRef.current.nodes()[0];null!=t&&(console.log(e),t.setAttr("fontFamily",e),t.getStage().batchDraw())}},{key:"updateFontAlignment",value:function(e){var t=this.transformerRef.current.nodes()[0];null!=t&&(console.log(e),t.setAttr("align",e),t.getStage().batchDraw())}},{key:"updateCornerRadius",value:function(e){var t=this.transformerRef.current.nodes()[0];null!=t&&(console.log(e),t.setAttr("cornerRadius",e),t.getStage().batchDraw())}},{key:"updateFill",value:function(e){var t=this.transformerRef.current.nodes()[0];console.log(e),null!=t&&(null==e?t.setAttr("fill",e):t.setAttr("fill","#"+e.hex),t.getStage().batchDraw())}},{key:"updateBlur",value:function(e){var t=this.transformerRef.current.nodes()[0];null!=t&&(t.blurRadius(e),t.cache(),t.getStage().batchDraw())}},{key:"updateBrightness",value:function(e){var t=this.transformerRef.current.nodes()[0];null!=t&&(t.brightness(e),t.cache(),t.getStage().batchDraw())}},{key:"updateNoise",value:function(e){var t=this.transformerRef.current.nodes()[0];null!=t&&(t.noise(e),t.cache(),t.getStage().batchDraw())}},{key:"updatePixelate",value:function(e){var t=this.transformerRef.current.nodes()[0];null!=t&&(t.pixelSize(e),t.cache(),t.getStage().batchDraw())}},{key:"updateMask",value:function(e){var t=this.transformerRef.current.nodes()[0];null!=t&&(t.threshold(e),t.cache(),t.getStage().batchDraw())}},{key:"render",value:function(){var e=this;return Object(f.jsx)(S.a,{theme:Qe,children:Object(f.jsxs)("div",{className:"editor d-flex flex-column",children:[Object(f.jsxs)("div",{className:"d-flex flex-fill",children:[Object(f.jsxs)("div",{id:"canvas-container",className:"d-flex justify-content-center align-items-center w-100",children:[null==this.state.image?Object(f.jsx)(x,{imgLoader:this.imageLoader.bind(this)}):Object(f.jsx)(ze,{imgLoader:this.createNewSecondaryImage.bind(this)}),Object(f.jsx)(Le.f,{width:0,height:0,ref:this.stageRef,style:{outline:"none"},children:Object(f.jsxs)(Le.c,{ref:this.mainLayerRef,onMouseDown:this.handleCanvasMouseDown.bind(this),onMouseMove:this.handleCanvasMouseMove.bind(this),onMouseUp:this.handleCanvasMouseUp.bind(this),onMouseLeave:this.handleCanvasMouseLeave.bind(this),onDblClick:this.handleCanvasDblClick.bind(this),children:[Object(f.jsx)(Le.b,{ref:this.kvMainImageRef}),this.state.itemArray.map((function(t){return i.a.cloneElement(t,{draggable:"SelectorAndText"==e.state.selectedTool})})),Object(f.jsx)(Le.h,{ref:this.transformerRef,rotateEnabled:!0,keepRatio:!1})]})})]}),Object(f.jsxs)("nav",{id:"sidetoolbar",className:"d-flex flex-column p-0 justify-content-between",children:[Object(f.jsxs)("div",{className:"d-flex flex-column",children:[Object(f.jsx)("button",{type:"button",id:"deletemainbutton",className:"btn btn-danger",style:{width:"50px",height:"45px"},onClick:this.imageUnloader.bind(this),variant:"contained",color:"secondary",disabled:null==this.state.image,children:Object(f.jsx)(U.a,{})}),Object(f.jsx)(G,{tool:this.state.selectedTool,toolUpdater:this.changeSelectedTool.bind(this)})]}),Object(f.jsxs)("div",{className:"d-flex flex-column",children:[Object(f.jsx)(Te,{copyHandler:this.imageCopytoClipboard.bind(this),enabled:null==this.state.image}),Object(f.jsx)(O.a,{id:"downloadbutton",className:"ml-auto p-0 my-0",color:"primary",size:"medium",variant:null==this.state.image?"outlined":"contained",disabled:null==this.state.image,onClick:this.imageDownloader.bind(this),children:Object(f.jsx)(V.a,{})})]})]})]}),Object(f.jsx)(Ne,{ref:this.bottomToolbarRef,fontSizeUpdater:this.updateTextSize.bind(this),fontColorUpdater:this.updateTextColor.bind(this),strokeColorUpdater:this.updateStrokeColor.bind(this),strokeSizeUpdater:this.updateStrokeSize.bind(this),fontFamilyUpdater:this.updateFontFamily.bind(this),alignmentUpdater:this.updateFontAlignment.bind(this),shadowColorUpdater:this.updateShadowColor.bind(this),shadowSizeUpdater:this.updateShadowSize.bind(this),dashUpdater:this.updateDash.bind(this),cornerRadiusUpdater:this.updateCornerRadius.bind(this),fillUpdater:this.updateFill.bind(this),blurValueUpdater:this.updateBlur.bind(this),brightnessValueUpdater:this.updateBrightness.bind(this),noiseValueUpdater:this.updateNoise.bind(this),pixelValueUpdater:this.updatePixelate.bind(this),maskValueUpdater:this.updateMask.bind(this)})]})})}}]),a}(i.a.Component);i.a.Component,i.a.Component;var et=function(){return Object(f.jsx)(i.a.Fragment,{children:Object(f.jsx)(o.a,{children:Object(f.jsxs)(l.c,{children:[Object(f.jsx)(l.a,{exact:!0,path:"/",component:$e}),Object(f.jsx)(l.a,{exact:!0,path:"/editor",component:$e}),Object(f.jsx)(l.a,{component:$e})]})})})},tt=function(e){e&&e instanceof Function&&a.e(3).then(a.bind(null,667)).then((function(t){var a=t.getCLS,s=t.getFID,i=t.getFCP,n=t.getLCP,r=t.getTTFB;a(e),s(e),i(e),n(e),r(e)}))};r.a.render(Object(f.jsx)(i.a.StrictMode,{children:Object(f.jsx)(et,{})}),document.getElementById("root")),tt()}},[[607,1,2]]]);
//# sourceMappingURL=main.7b520617.chunk.js.map